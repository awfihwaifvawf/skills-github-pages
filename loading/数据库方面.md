# 数据库相关知识总结

## 1.数据库事务的隔离级别和并发问题

### 1.1.1 Mysql、Spring隔离级别

读未提交：事务A读取到了事务B的还没有提交的数据

读已提交：事务A只能读取到其他事务已提交的数据

可重复读：事务A多次读取同一数据（即使被事务B给修改了），读取到的数据内容是相同的（默认级别）

串行化：事务按顺序执行，每次的写入与读取都不会有冲突

### 1.1.2 Orcale隔离级别

读已提交：事务A只能读取到其他事务已提交的数据（默认级别）

串行化：事务按顺序执行，每次的写入与读取都不会有冲突



Oracle不支持其他数据库中常见的未提交读（READ UNCOMMITTED）和可重复读（REPEATABLE READ）隔离级别。不过，Oracle通过使用**多版本并发控制（MVCC）**机制来实现其隔离级别，从而在保证数据一致性的同时，尽可能地提高并发性能。

这时候就要问了，MVCC是什么，是如何工作的或者说MVCC是如何保持事务隔离性的（待验证）



这时候就要问了，假如Spring设置的事务隔离级别 数据库不支持怎么办？

比如Spring设置事务隔离级别未可重复读，但是orcale并未提供相应的数据库隔离级别（待验证）

------

## 2.数据并发问题

脏读：事务A读取到了事务B的还没有提交的数据

幻读：事务 A 查询符合条件的记录集合时，事务 B 插入、删除或更新了符合条件的数据，导致事务 A 再次查询时，返回的**记录集合**发生了变化。

不可重复读：事务 A 在读取数据后，事务 B 对该**数据**进行了修改并提交，导致事务 A 读取到不同的值。



看起来幻读和不可重复读的概念比较类似，但是幻读与不可重复读的核心区别在于前者涉及数据行的增减导致结果集变化，后者聚焦同一数据行的修改导致值不一致。不可重复读是因其他事务更新/删除已存在数据引起的，而幻读由其他事务插入/删除符合查询条件的新数据引发的。‌‌

|          | 脏读   | 幻读   | 不可重复读 |
| -------- | ------ | ------ | ---------- |
| 读未提交 | 未解决 | 未解决 | 未解决     |
| 读已提交 | 解决   | 未解决 | 未解决     |
| 可重复读 | 解决   | 未解决 | 解决       |
| 串行化   | 解决   | 解决   | 解决       |

### 3.Spring事务传播级别

### 4.分布式事务

